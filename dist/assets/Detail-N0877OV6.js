import{T as P}from"./TopBar-TE3OBIJW.js";import{d as I,o as l,c as h,a as s,_ as G,u as J,b as K,i as y,r as c,f as Q,j as d,k as o,w as t,q as f,x as b,F as A,l as u,m as B,p as W,n as H}from"./index-78te5h-u.js";import X from"./Comment-s7cai7DP.js";const Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Z=s("path",{d:"M394 480a16 16 0 0 1-9.39-3L256 383.76L127.39 477a16 16 0 0 1-24.55-18.08L153 310.35L23 221.2a16 16 0 0 1 9-29.2h160.38l48.4-148.95a16 16 0 0 1 30.44 0l48.4 149H480a16 16 0 0 1 9.05 29.2L359 310.35l50.13 148.53A16 16 0 0 1 394 480z",fill:"currentColor"},null,-1),ee=[Z],te=I({name:"Star",render:function(_,v){return l(),h("svg",Y,ee)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ne=s("path",{d:"M480 208H308L256 48l-52 160H32l140 96l-54 160l138-100l138 100l-54-160z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),le=[ne],se=I({name:"StarOutline",render:function(_,v){return l(),h("svg",oe,le)}}),ae={style:{position:"fixed",top:"0",height:"50px",width:"100%","z-index":"999"}},ie={class:"tabs"},re={style:{height:"75px","background-color":"#FCFAF7"}},ce={style:{position:"relative",left:"36px",color:"#808080"}},de={style:{position:"relative",left:"70px",color:"#808080"}},ue={style:{display:"flex"}},_e={style:{"margin-right":"10px"}},pe={class:"article-content"},ve=["innerHTML"],ge={__name:"Detail",setup(F){const _=J(),v=K();y("serverUrl");const i=y("axios"),x=y("message"),M=y("dialog"),r=c({}),L=c([]),n=c({}),q=c(""),T=c(!1),D=c(0),m=c(!1);Q(()=>{k()});const k=async()=>{let e=await i.get("article/"+v.query.id);if(console.log(e),e.code==200){r.value=e.data;let a=await i.get("category/"+e.data.articleid);console.log(a),a.code==200&&(L.value=a.data.map(C=>C));let g=await i.get("user/briefInfo/"+e.data.authorid);console.log(g),g.code==200&&(n.value=g.data,q.value=n.value.avatar,n.value.userid==n.value.loginid&&(m.value=!0));let p=await i.get("collects/"+v.query.id);console.log(p),p.code==200&&(T.value=p.data.collected,D.value=p.data.index)}},S=async()=>{let e=await i.put("collects/new/"+v.query.id);console.log(e),e.code==200&&(x.warning("已收藏",{showIcon:!1}),k())},z=async()=>{let e=await i.remove("collects/"+D.value);console.log(e),e.code==200&&(x.warning("取消收藏",{showIcon:!1}),k())},U=()=>{n.value.userid==n.value.loginid?_.push({path:"/myself",query:{id:n.value.userid}}):_.push({path:"/others",query:{id:n.value.userid}})},V=()=>{_.push({path:"/update",query:{id:r.value.articleid}})},j=async e=>{M.warning({title:"警告",content:"是否要删除",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{let a=await i.remove("article/"+r.value.articleid);a.code==200?(x.info(a.message),E()):x.error(a.message)},onNegativeClick:()=>{}})},E=()=>{_.go(-1)};return(e,a)=>{const g=d("n-h1"),p=d("n-avatar"),C=d("n-tag"),w=d("n-button"),O=d("n-divider"),N=d("n-icon"),$=d("n-card");return l(),h(A,null,[s("div",ae,[o(P)]),s("div",ie,[o($,null,{default:t(()=>[o(g,null,{default:t(()=>[u(B(r.value.title),1)]),_:1}),s("div",re,[o(p,{onClick:U,round:"",size:"medium",src:q.value,style:{position:"relative",left:"20px",top:"20px",cursor:"pointer"}},null,8,["src"]),s("text",ce,"发布时间："+B(r.value.releasetime),1),s("div",de,[u(" 文章分类： "),s("div",ue,[(l(!0),h(A,null,W(L.value,(R,fe)=>(l(),h("div",_e,[o(C,{type:"warning"},{default:t(()=>[u(B(R),1)]),_:2},1024)]))),256))])]),m.value?(l(),f(w,{key:0,onClick:V,ghost:"",style:{bottom:"45px",left:"805px"},color:"#7B3DE0"},{default:t(()=>[u("修改")]),_:1})):b("",!0),m.value?(l(),f(w,{key:1,onClick:j,ghost:"",style:{bottom:"45px",left:"815px"},color:"#7B3DE0"},{default:t(()=>[u("删除")]),_:1})):b("",!0)]),o(O),T.value?(l(),f(w,{key:1,text:"",onClick:z,style:{position:"absolute",right:"40px",top:"25px",cursor:"pointer"},round:"",ghost:"",color:"#FFA876"},{icon:t(()=>[o(N,null,{default:t(()=>[o(H(te))]),_:1})]),default:t(()=>[u(" 已收藏 ")]),_:1})):(l(),f(w,{key:0,text:"",onClick:S,style:{position:"absolute",right:"40px",top:"25px",cursor:"pointer"},round:"",ghost:"",color:"#FFA876"},{icon:t(()=>[o(N,null,{default:t(()=>[o(H(se))]),_:1})]),default:t(()=>[u(" 收藏 ")]),_:1})),s("div",pe,[s("div",{innerHTML:r.value.content},null,8,ve)])]),_:1}),n.value.loginid?(l(),f($,{key:0},{default:t(()=>[o(X,{userid:n.value.loginid,articleid:r.value.articleid,self:m.value},null,8,["userid","articleid","self"])]),_:1})):b("",!0)])],64)}}},we=G(ge,[["__scopeId","data-v-23c7c9da"]]);export{we as default};
