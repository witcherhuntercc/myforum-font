import{T as U}from"./TopBar-TE3OBIJW.js";import{d as q,o as p,c as _,a as s,_ as A,u as D,b as R,i as h,r as y,e as V,f as j,g as E,h as H,j as i,k as a,w as l,t as O,l as g,m as c,n as G,F as J,p as K,q as S,s as P,v as Q}from"./index-78te5h-u.js";const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},X=s("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8a124.95 124.95 0 0 1-124.8-124.8z",fill:"currentColor"},null,-1),Y=[X],Z=q({name:"Search",render:function(w,k){return p(),_("svg",W,Y)}}),ee=r=>(P("data-v-38f35cc7"),r=r(),Q(),r),te={style:{position:"fixed",top:"0",height:"50px",width:"100%","z-index":"999"}},oe={class:"card"},ne={style:{position:"fixed",top:"0",height:"50px",width:"100%","z-index":"999"}},se={class:"tabs"},ae={style:{"margin-bottom":"15px"}},le={style:{position:"absolute",left:"240px",width:"690px"}},ie={style:{"font-weight":"bold","font-size":"20px"}},ce=["innerHTML"],pe=ee(()=>s("div",{style:{"text-align":"center"}},[g(" 文章太精彩了"),s("br"),g("点进去看看吧 ")],-1)),re={style:{position:"absolute","margin-top":"10px"}},de={style:{height:"140px"}},ue=["onClick"],_e=["onClick"],ge={style:{position:"absolute","margin-top":"10px"}},ve={__name:"MainFrame",setup(r){const w=D();R(),h("serverUrl");const k=h("axios");h("message");const v=y(1),m=y([]),b=y([]),e=V({pageNum:1,pageSize:5,pageCount:0,count:0,keyword:"",categoryId:0,categoryname:0});j(()=>{d(),N()});const d=async(n=0)=>{n!=0&&(e.pageNum=n);let t=await E.post(`/article/list?keyword=${e.keyword}&pageNum=${e.pageNum}&pageSize=${e.pageSize}&category=${C.value}`);console.log(t),t.code==200&&(b.value=t.data.articlelist,e.count=t.data.count,e.pageCount=parseInt(e.count/e.pageSize)+(e.count%e.pageSize>0?1:0),console.log(e.pageNum,e.pageCount,e.count))},N=async()=>{let n=await k.get("/article/category");console.log(n),n.code==200&&(m.value=n.data.map(t=>({label:t.name,value:t.id})))},C=H(()=>{let n=m.value.find(u=>u.value==v.value),t=O(n);return typeof n>"u"?console.log("该变量是未定义的"):(console.log("该变量已经被定义了"),console.log(t)),n?n.label:"All"}),$=n=>{e.categoryId=n,e.pageNum=1,d()},f=n=>{w.push({path:"/detail",query:{id:n.articleid}})};return(n,t)=>{const u=i("n-button"),B=i("n-popselect"),I=i("n-input"),F=i("n-icon"),M=i("n-image"),L=i("n-ellipsis"),x=i("n-card"),T=i("n-pagination");return p(),_("div",null,[s("div",te,[s("div",oe,[a(B,{"onUpdate:value":[$,t[0]||(t[0]=o=>v.value=o)],value:v.value,options:m.value,trigger:"click"},{default:l(()=>[a(u,{text:"",style:{position:"absolute",left:"50px",top:"22px","font-size":"18px"}},{default:l(()=>[g(c(C.value),1)]),_:1})]),_:1},8,["value","options"]),a(I,{value:e.keyword,"onUpdate:value":t[1]||(t[1]=o=>e.keyword=o),round:"",placeholder:"请输入关键字",style:{position:"absolute",left:"125px",top:"15px",width:"1000px","background-color":"#F3F0F9"}},null,8,["value"]),a(u,{onClick:t[2]||(t[2]=o=>d(0)),round:"",color:"#7B3DE0",style:{position:"absolute",left:"1150px",top:"15px"}},{icon:l(()=>[a(F,null,{default:l(()=>[a(G(Z))]),_:1})]),default:l(()=>[g(" 搜索 ")]),_:1})])]),s("div",ne,[a(U)]),s("div",se,[a(x,null,{default:l(()=>[(p(!0),_(J,null,K(b.value,(o,me)=>(p(),_("div",ae,[o.avatar?(p(),S(x,{key:0,onClick:z=>f(o),style:{cursor:"pointer"},hoverable:""},{default:l(()=>[a(M,{width:"200",src:o.avatar,style:{float:"left"}},null,8,["src"]),s("div",le,[s("text",ie,c(o.title),1),s("p",null,[a(L,{"line-clamp":1},{tooltip:l(()=>[pe]),default:l(()=>[s("p",{innerHTML:o.content},null,8,ce)]),_:2},1024)]),s("div",re,"发布时间："+c(o.releasetime),1)])]),_:2},1032,["onClick"])):(p(),S(x,{key:1,style:{cursor:"pointer"},hoverable:""},{default:l(()=>[s("div",de,[s("text",{onClick:z=>f(o),style:{"font-weight":"bold","font-size":"20px"}},c(o.title),9,ue),s("p",{onClick:z=>f(o)},c(o.content+"..."),9,_e),s("div",ge,"发布时间："+c(o.releasetime),1)])]),_:2},1024))]))),256)),a(T,{"onUpdate:page":[d,t[3]||(t[3]=o=>e.pageNum=o)],page:e.pageNum,"page-slot":5,"page-count":e.pageCount},null,8,["page","page-count"])]),_:1})])])}}},he=A(ve,[["__scopeId","data-v-38f35cc7"]]);export{he as default};
